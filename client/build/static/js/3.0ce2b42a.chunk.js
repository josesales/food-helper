(this["webpackJsonpfood-helper"]=this["webpackJsonpfood-helper"]||[]).push([[3],{78:function(e,t,n){"use strict";var r,a,c,i=n(2),s=n(45),l=n(1),o=["title","titleId"];function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e,t){var n=e.title,i=e.titleId,s=p(e,o);return l.createElement("svg",u({height:"512pt",viewBox:"-57 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":i},s),n?l.createElement("title",{id:i},n):null,r||(r=l.createElement("path",{d:"m156.371094 30.90625h85.570312v14.398438h30.902344v-16.414063c.003906-15.929687-12.949219-28.890625-28.871094-28.890625h-89.632812c-15.921875 0-28.875 12.960938-28.875 28.890625v16.414063h30.90625zm0 0"})),a||(a=l.createElement("path",{d:"m344.210938 167.75h-290.109376c-7.949218 0-14.207031 6.78125-13.566406 14.707031l24.253906 299.90625c1.351563 16.742188 15.316407 29.636719 32.09375 29.636719h204.542969c16.777344 0 30.742188-12.894531 32.09375-29.640625l24.253907-299.902344c.644531-7.925781-5.613282-14.707031-13.5625-14.707031zm-219.863282 312.261719c-.324218.019531-.648437.03125-.96875.03125-8.101562 0-14.902344-6.308594-15.40625-14.503907l-15.199218-246.207031c-.523438-8.519531 5.957031-15.851562 14.472656-16.375 8.488281-.515625 15.851562 5.949219 16.375 14.472657l15.195312 246.207031c.527344 8.519531-5.953125 15.847656-14.46875 16.375zm90.433594-15.421875c0 8.53125-6.917969 15.449218-15.453125 15.449218s-15.453125-6.917968-15.453125-15.449218v-246.210938c0-8.535156 6.917969-15.453125 15.453125-15.453125 8.53125 0 15.453125 6.917969 15.453125 15.453125zm90.757812-245.300782-14.511718 246.207032c-.480469 8.210937-7.292969 14.542968-15.410156 14.542968-.304688 0-.613282-.007812-.921876-.023437-8.519531-.503906-15.019531-7.816406-14.515624-16.335937l14.507812-246.210938c.5-8.519531 7.789062-15.019531 16.332031-14.515625 8.519531.5 15.019531 7.816406 14.519531 16.335937zm0 0"})),c||(c=l.createElement("path",{d:"m397.648438 120.0625-10.148438-30.421875c-2.675781-8.019531-10.183594-13.429687-18.640625-13.429687h-339.410156c-8.453125 0-15.964844 5.410156-18.636719 13.429687l-10.148438 30.421875c-1.957031 5.867188.589844 11.851562 5.34375 14.835938 1.9375 1.214843 4.230469 1.945312 6.75 1.945312h372.796876c2.519531 0 4.816406-.730469 6.75-1.949219 4.753906-2.984375 7.300781-8.96875 5.34375-14.832031zm0 0"})))}var j=l.forwardRef(d),b=(n.p,n(0)),m=["id","placeholder","number","onDelete"];t.a=function(e){var t=e.id,n=e.placeholder,r=e.number,a=e.onDelete,c=Object(s.a)(e,m),l=null;return n&&(l=Object(b.jsx)("label",{htmlFor:t,className:"text-area-container__label",children:n})),Object(b.jsxs)("div",{className:"text-area-container",children:[Object(b.jsx)("textarea",Object(i.a)(Object(i.a)({},c),{},{id:t,placeholder:n,className:"text-area-container__text",rows:"4",cols:"100"})),l,a?Object(b.jsx)("span",{onClick:a,children:Object(b.jsx)(j,{className:"text-area-container__remove"})}):"",r?Object(b.jsxs)("span",{className:"text-area-container__number",onClick:function(){},children:[r,"."]}):""]})}},80:function(e,t,n){"use strict";var r,a,c=n(3),i=n.n(c),s=n(5),l=n(10),o=n(1),u=n(6),p=(n(4),["title","titleId"]);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e,t){var n=e.title,c=e.titleId,i=j(e,p);return o.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":c},i),n?o.createElement("title",{id:c},n):null,r||(r=o.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),a||(a=o.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})))}var m=o.forwardRef(b),f=(n.p,n(7)),h=(n(12),n(0));t.a=Object(u.b)(null,(function(e){return{setImage:function(t){return e(Object(f.g)(t))},setBase64Image:function(t){return e(Object(f.d)(t))}}}))((function(e){var t=e.setImage,n=e.image,r=e.setBase64Image,a=Object(o.useState)(n||null),c=Object(l.a)(a,2),u=c[0],p=c[1];return Object(h.jsxs)("div",{className:"image-upload",children:[Object(h.jsx)("label",{htmlFor:"file-input",children:u?Object(h.jsx)("form",{encType:"multipart/form-data",children:Object(h.jsx)("img",{src:u,className:"image-upload__img"})}):Object(h.jsx)(m,{className:"image-upload__img"})}),Object(h.jsx)("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"file-input",onChange:function(e){var n=e.target;if(n.files&&n.files[0]){var a=new FileReader;a.onload=function(e){(function(){var t=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e.target.result);case 2:return t.next=4,r(e.target.result);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()},t(n.files[0]),a.readAsDataURL(n.files[0])}}})]})}))},86:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(5),i=n(31),s=n(2),l=n(10),o=n(1),u=n(6),p=n(4),d=n(80),j=n(78),b=n(33),m=n(0),f=function(e){var t=e.steps,n=e.onChange,r=e.onDelete,a=null,c=null;return t&&0!=t.length?a=t.map((function(e,t){return Object(m.jsx)("li",{children:Object(m.jsx)(j.a,{number:t+1,value:e,id:t,onChange:n,onDelete:r})},t)})):c=Object(m.jsx)("li",{className:"no-steps",children:Object(m.jsx)("h3",{children:"Currently there are no steps added"})},0),Object(m.jsx)("div",{className:"edit-steps",children:Object(m.jsx)("ul",{className:"edit-steps__list",children:a||c})})},h=n(29),O=n(12),g=n(13),v=n(27),x=n(15),_=n(50),y=n(48),w=n(49),N=n(23),C=n(8),I=n(7),k=n(42),S=!0,E=null,T=Object(p.b)({persistRecipe:O.f,image:O.d,base64Image:O.a,token:N.b,currentUser:N.a});t.default=Object(u.b)(T,(function(e){return{fetchIngredients:function(){return e(Object(v.a)())},fetchMaterials:function(){return e(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.a)("/materials");case 3:n=e.sent,t({type:_.a.FETCH_MATERIALS,payload:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while trying to communicate with the API: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())},fetchCategories:function(){return e(Object(y.a)())},fetchDietTypes:function(){return e(Object(w.a)())},setImage:function(t){return e(Object(I.g)(t))},setCurrentUser:function(t){return e(Object(k.b)(t))}}}))((function(e){var t=e.persistRecipe,n=e.image,r=e.base64Image,p=e.fetchIngredients,O=e.fetchMaterials,v=e.fetchCategories,_=e.fetchDietTypes,y=e.setImage,w=e.token,N=e.currentUser,I=e.setCurrentUser,k=Object(C.h)(),T=k&&k.state&&k.state.recipe&&k.state.recipe._id?k.state.recipe:null;T&&(T=Object.assign({},T));var D=null;T&&T.image&&(D=T.image,delete T.image);var P=Object(o.useState)(T||{name:"",videoUrl:"",steps:[],preparationTime:"",peoplePerServing:"",calories:""}),U=Object(l.a)(P,2),z=U[0],R=U[1],F=function(e){R(Object(s.a)(Object(s.a)({},z),{},Object(i.a)({},e.target.id,e.target.value)))},M=Object(o.useState)(""),A=Object(l.a)(M,2),H=A[0],L=A[1],V=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R((function(e){return Object(s.a)(Object(s.a)({},e),{},{steps:e.steps.concat([H])})}));case 2:L("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=+t.target.id,r=t.target.value,e.next=4,R((function(e){return e.steps[n]=r,Object(s.a)({},e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=+t.target.id,R((function(e){return Object(s.a)(Object(s.a)({},e),{},{steps:e.steps.filter((function(e,t){return t!=n}))})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&n.type||T){e.next=3;break}throw new Error("Image is mandatory");case 3:return e.next=5,Object(x.b)("/recipes","POST",z,w);case 5:if(t=e.sent,!n){e.next=9;break}return e.next=9,Object(x.d)("/recipeImage",n,t._id,w);case 9:(r=Object.assign({},z)).image=D,t.videoUrl&&(r.videoUrl=t.videoUrl),N.recipes&&N.recipes.length>0?(c=N.recipes.map((function(e){return e._id==r._id?(n&&(r.image=E.split(",")[1]),r):e})),r._id?I(Object(s.a)(Object(s.a)({},N),{},{recipes:c})):(r.image=E.split(",")[1],i=Object.assign({},t),i=Object.assign(i,r),c&&c.length>0?I(Object(s.a)(Object(s.a)({},N),{},{recipes:[].concat(c).concat([i])})):I(Object(s.a)(Object(s.a)({},N),{},{recipes:[].concat([i])})))):I(Object(s.a)(Object(s.a)({},N),{},{recipes:[].concat(r)})),alert("Recipe Saved Successfully!"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("Error while saving the recipe: "+e.t0.message),alert(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),Y=Object(u.c)((function(e){return e.ingredient.ingredients})),G=Object(u.c)((function(e){return e.material.materials})),K=Object(u.c)((function(e){return e.category.categories})),Q=Object(u.c)((function(e){return e.dietType.dietTypes}));return Object(o.useEffect)((function(){S=!1,0==Y.length&&p(),0==G.length&&O(),0==K.length&&v(),0==Q.length&&_(),y(null)}),[]),Object(o.useEffect)((function(){S||!t.ingredients?R(Object(s.a)(Object(s.a)({},z),t)):S=!0}),[t]),Object(o.useEffect)((function(){E=r}),[r]),Object(m.jsxs)("div",{className:"recipe-form",children:[Object(m.jsx)("div",{className:"recipe-form__title",children:Object(m.jsx)("h2",{className:"heading-primary",children:z.name?z.name:"New Recipe"})}),Object(m.jsxs)("div",{className:"center",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(b.a,{children:Object(m.jsx)("input",{type:"text",id:"name",placeholder:"Name",required:!0,value:z.name,onChange:F,autoComplete:"off"})}),Object(m.jsx)(b.a,{children:Object(m.jsx)(h.a,{id:"recipe-form_ingredients",placeholder:"Ingredients",buttonName:g.a.add,containerClass:"field__select",inputClass:"field__select__text",collectionName:"ingredients",collectionDb:T&&T.ingredients?T.ingredients:null,children:Object(m.jsx)("label",{htmlFor:"recipe-form_ingredients",className:"field__label",children:"Ingredients"})})}),Object(m.jsx)(b.a,{children:Object(m.jsx)(h.a,{id:"recipe-form_materials",placeholder:"Materials",buttonName:g.a.add,containerClass:"field__select",inputClass:"field__select__text",collectionName:"materials",collectionDb:T&&T.materials?T.materials:null,children:Object(m.jsx)("label",{htmlFor:"recipe-form_materials",className:"field__label",children:"Materials"})})}),Object(m.jsx)(b.a,{children:Object(m.jsx)("input",{type:"text",id:"videoUrl",placeholder:"Youtube Video Url",required:!0,value:z.videoUrl,onChange:F,autoComplete:"off"})})]}),Object(m.jsxs)("div",{className:"image-container",children:[Object(m.jsx)("h2",{className:"heading-secondary text",children:"Picture"}),Object(m.jsx)(d.a,{image:D?"data:image/png;base64,"+D:null})]})]}),Object(m.jsxs)("div",{className:"center",children:[Object(m.jsxs)("div",{className:"container-2",children:[Object(m.jsx)(b.a,{children:Object(m.jsx)(h.a,{isSelect:!0,id:"recipe-form_categories",placeholder:"Category",buttonName:g.a.search,containerClass:"field__select",inputClass:"field__select__text",collectionName:"categories",documentDb:T&&T.category?T.category:null,children:Object(m.jsx)("label",{htmlFor:"recipe-form_categories",className:"field__label",children:"Category"})})}),Object(m.jsx)(b.a,{children:Object(m.jsx)(h.a,{isSelect:!0,id:"recipe-form_diet-type",placeholder:"Diet Type",buttonName:g.a.search,containerClass:"field__select",inputClass:"field__select__text",collectionName:"dietTypes",documentDb:T&&T.dietType?T.dietType:null,children:Object(m.jsx)("label",{htmlFor:"recipe-form_diet-type",className:"field__label",children:"Diet Type"})})}),Object(m.jsx)(b.a,{children:Object(m.jsx)("input",{type:"text",id:"preparationTime",placeholder:"Preparation Time",required:!0,value:z.preparationTime,onChange:F,autoComplete:"off"})})]}),Object(m.jsxs)("div",{className:"container-3",children:[Object(m.jsx)(b.a,{children:Object(m.jsx)("input",{type:"number",min:"1",id:"peoplePerServing",placeholder:"People per Serving",value:z.peoplePerServing,onChange:F,autoComplete:"off"})}),Object(m.jsx)(b.a,{children:Object(m.jsx)("input",{type:"number",min:"1",id:"calories",placeholder:"Calories",value:z.calories,onChange:F,autoComplete:"off"})})]})]}),Object(m.jsx)("div",{className:"center",children:Object(m.jsxs)("div",{className:"step-container",children:[Object(m.jsx)("div",{className:"step-container__text-area",children:Object(m.jsx)(j.a,{id:"new-step",placeholder:"New Step",value:H,onChange:function(e){L(e.target.value)}})}),Object(m.jsx)("button",{className:"step-container__button",onClick:V,children:"Add Step"})]})}),Object(m.jsx)(f,{steps:z.steps,onChange:B,onDelete:q}),Object(m.jsx)("div",{className:"center",children:Object(m.jsx)("div",{className:"save-button-container",children:Object(m.jsx)("button",{onClick:J,children:"Save Recipe"})})})]})}))}}]);
//# sourceMappingURL=3.0ce2b42a.chunk.js.map