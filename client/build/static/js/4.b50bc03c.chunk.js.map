{"version":3,"sources":["assets/upload.svg","components/ImageUpload.jsx","pages/SignUp.jsx"],"names":["_path","_path2","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgUpload","_ref","svgRef","title","titleId","props","xmlns","height","viewBox","width","ref","id","d","fill","ForwardRef","connect","dispatch","setImage","image","setBase64Image","base64Image","useState","base64ImageState","setBase64ImageState","className","htmlFor","encType","src","type","accept","name","onChange","files","reader","FileReader","onload","e","a","result","setImg","readAsDataURL","mapStateToProps","createStructuredSelector","selectImage","currentUser","selectCurrentUser","setCurrentUser","user","setToken","token","username","email","password","confirmPassword","userState","setUserState","validateUser","trim","Error","onSignUpClick","postPatch","upload","console","log","alert","message","onUserChange","event","value","Fragment","to","placeholder","required","onClick"],"mappings":"qHAAIA,EAAOC,E,6CAEPC,G,KAAY,CAAC,QAAS,YAE1B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,SAASoB,EAAUC,EAAMC,GACvB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQd,EAAyBU,EAAMzB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtD6B,MAAO,6BACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,GACPC,IAAKR,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DQ,GAAIP,GACHD,GAAS,KAAM7B,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,kBACHC,KAAM,UACHtC,IAAWA,EAAsB,gBAAoB,OAAQ,CAChEqC,EAAG,0KAIP,IAAIE,EAA0B,aAAiBd,G,GAChC,I,qBCmBAe,gBAAQ,MALI,SAAAC,GAAQ,MAAK,CACpCC,SAAU,SAAAC,GAAK,OAAIF,EAASC,YAASC,KACrCC,eAAgB,SAAAC,GAAW,OAAIJ,EAASG,YAAeC,QAG5CL,EA/CK,SAAC,GAAyC,IAAvCE,EAAsC,EAAtCA,SAAUC,EAA4B,EAA5BA,MAAOC,EAAqB,EAArBA,eAEpC,EAAgDE,mBAASH,GAAgB,MAAzE,mBAAOI,EAAP,KAAyBC,EAAzB,KAoBA,OAEI,sBAAKC,UAAU,eAAf,UAEI,uBAAOC,QAAQ,aAAf,SAEQH,EACI,sBAAMI,QAAQ,sBAAd,SACI,qBAAKC,IAAKL,EAAkBE,UAAU,wBAG1C,cAAC,EAAD,CAAQA,UAAU,wBAI9B,uBAAOI,KAAK,OAAOC,OAAO,wBAAwBC,KAAK,QAAQnB,GAAG,aAAaoB,SAhChE,SAAC,GAAgB,IAAdnD,EAAa,EAAbA,OACtB,GAAIA,EAAOoD,OAASpD,EAAOoD,MAAM,GAAI,CACjC,IAAIC,EAAS,IAAIC,WAEjBD,EAAOE,OAAS,SAAUC,IACV,uCAAG,sBAAAC,EAAA,sEACLd,EAAoBa,EAAExD,OAAO0D,QADxB,uBAELnB,EAAeiB,EAAExD,OAAO0D,QAFnB,2CAAH,qDAIZC,IAGJtB,EAASrC,EAAOoD,MAAM,IACtBC,EAAOO,cAAc5D,EAAOoD,MAAM,e,6LC4FxCS,EAAkBC,YAAyB,CAC/CxB,MAAOyB,IACPC,YAAaC,MAQA9B,sBAAQ0B,GALI,SAAAzB,GAAQ,MAAK,CACtC8B,eAAgB,SAAAC,GAAI,OAAI/B,EAAS8B,YAAeC,KAChDC,SAAU,SAAAC,GAAK,OAAIjC,EAASgC,YAASC,QAGxBlC,EApHA,SAAC,GAAsD,IAApDG,EAAmD,EAAnDA,MAAO0B,EAA4C,EAA5CA,YAAaE,EAA+B,EAA/BA,eAAgBE,EAAe,EAAfA,SAEpD,EAAkC3B,mBAAS,CAAES,KAAM,GAAIoB,SAAU,GAAIC,MAAO,GAAIC,SAAU,GAAIC,gBAAiB,KAA/G,mBAAOC,EAAP,KAAkBC,EAAlB,KAEMC,EAAe,WAEnB,IAAKF,EAAUxB,KAAK2B,OAClB,MAAM,IAAIC,MAAM,sBAElB,IAAKJ,EAAUH,MAAMM,OACnB,MAAM,IAAIC,MAAM,uBAElB,IAAKJ,EAAUF,SAASK,OACtB,MAAM,IAAIC,MAAM,0BAElB,IAAKJ,EAAUD,gBAAgBI,OAC7B,MAAM,IAAIC,MAAM,kCAElB,GAAIJ,EAAUF,UAAYE,EAAUD,gBAClC,MAAM,IAAIK,MAAM,+CAIdC,EAAa,uCAAG,gCAAAtB,EAAA,sEAGlBmB,IAHkB,SAKYI,YAAU,SAAU,OAAQN,GALxC,mBAKVP,EALU,EAKVA,KAAME,EALI,EAKJA,OAEV/B,EAPc,kCAQV2C,YAAO,mBAAoB3C,EAAO,KAAM+B,GAR9B,QAWlBH,EAAeC,GACfC,EAASC,GAZS,kDAclBa,QAAQC,IAAR,MACAC,MAAM,KAAMC,SAfM,0DAAH,qDAmBbC,EAAe,SAAAC,GACnB,MAAwBA,EAAMvF,OAAtBwF,EAAR,EAAQA,MAAOtC,EAAf,EAAeA,KAEfyB,EAAa,2BAAKD,GAAN,kBAAkBxB,EAAOsC,MAGvC,OACE,cAAC,IAAMC,SAAP,UAEIzB,EAAc,cAAC,IAAD,CAAU0B,GAAG,MAEzB,sBAAK9C,UAAU,UAAf,UAEE,sBAAKA,UAAU,YAAf,UAGE,qBAAKA,UAAU,mBAAf,SACE,oBAAIA,UAAU,kBAAd,uBAGF,sBAAKA,UAAU,uBAAf,UAEE,cAAC,IAAD,UACE,uBAAOI,KAAK,OAAOE,KAAK,OAAOnB,GAAG,sBAAsB4D,YAAY,YAAYC,UAAQ,EAACJ,MAAOd,EAAUxB,KACxGC,SAAUmC,MAGd,cAAC,IAAD,UACE,uBAAOtC,KAAK,QAAQE,KAAK,QAAQnB,GAAG,kBAAkB4D,YAAY,QAAQC,UAAQ,EAACJ,MAAOd,EAAUH,MAClGpB,SAAUmC,MAGd,cAAC,IAAD,UACE,uBAAOtC,KAAK,WAAWE,KAAK,WAAWnB,GAAG,qBAAqB4D,YAAY,WAAWC,UAAQ,EAACJ,MAAOd,EAAUF,SAC9GrB,SAAUmC,MAGd,cAAC,IAAD,UACE,uBAAOtC,KAAK,WAAWE,KAAK,kBAAkBnB,GAAG,6BAA6B4D,YAAY,mBAAmBC,UAAQ,EACnHJ,MAAOd,EAAUD,gBAAiBtB,SAAUmC,SAKlD,sBAAK1C,UAAU,8BAAf,UAEE,wBAAQiD,QAASd,EAAjB,qBAEA,cAAC,IAAD,CAAMnC,UAAU,uCAAuC8C,GAAG,SAA1D,yBAMJ,sBAAK9C,UAAU,kBAAf,UACE,oBAAIA,UAAU,yBAAd,oBACA,cAAC,IAAD","file":"static/js/4.b50bc03c.chunk.js","sourcesContent":["var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUpload(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUpload);\nexport default __webpack_public_path__ + \"static/media/upload.b287d905.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { ReactComponent as Upload } from \"../assets/upload.svg\";\r\nimport { setImage, setBase64Image } from '../redux/recipe/recipe-actions';\r\nimport { selectBase64Image } from '../redux/recipe/recipe-selector';\r\n\r\nconst ImageUpload = ({ setImage, image, setBase64Image }) => {\r\n\r\n    const [base64ImageState, setBase64ImageState] = useState(image ? image : null);\r\n\r\n\r\n    const onFileUploaded = ({ target }) => {\r\n        if (target.files && target.files[0]) {\r\n            var reader = new FileReader();\r\n\r\n            reader.onload = function (e) {\r\n                const setImg = async () => {\r\n                    await setBase64ImageState(e.target.result);\r\n                    await setBase64Image(e.target.result);\r\n                }\r\n                setImg();\r\n            };\r\n\r\n            setImage(target.files[0]);\r\n            reader.readAsDataURL(target.files[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"image-upload\">\r\n\r\n            <label htmlFor=\"file-input\">\r\n                {\r\n                    base64ImageState ?\r\n                        <form encType=\"multipart/form-data\">\r\n                            <img src={base64ImageState} className=\"image-upload__img\" />\r\n                        </form> :\r\n\r\n                        <Upload className=\"image-upload__img\" />\r\n                }\r\n            </label>\r\n\r\n            <input type=\"file\" accept=\"image/jpeg, image/png\" name=\"image\" id=\"file-input\" onChange={onFileUploaded} />\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    setImage: image => dispatch(setImage(image)),\r\n    setBase64Image: base64Image => dispatch(setBase64Image(base64Image)),\r\n});\r\n\r\nexport default connect(null, mapDispatchToProps)(ImageUpload);","import React, { useState } from 'react';\r\nimport InputField from '../components/ui/InputField';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport ImageUpload from '../components/ImageUpload';\r\nimport { selectImage } from '../redux/recipe/recipe-selector';\r\nimport { connect } from 'react-redux';\r\nimport { createStructuredSelector } from 'reselect';\r\nimport { postPatch, upload } from '../util/request-sender';\r\nimport { selectCurrentUser } from '../redux/user/user-selector';\r\nimport { setCurrentUser, setToken } from '../redux/user/user-actions';\r\n\r\nconst SignUp = ({ image, currentUser, setCurrentUser, setToken }) => {\r\n\r\n  const [userState, setUserState] = useState({ name: '', username: '', email: '', password: '', confirmPassword: '' });\r\n\r\n  const validateUser = () => {\r\n\r\n    if (!userState.name.trim()) {\r\n      throw new Error('Name is mandatory.');\r\n    }\r\n    if (!userState.email.trim()) {\r\n      throw new Error('Email is mandatory.');\r\n    }\r\n    if (!userState.password.trim()) {\r\n      throw new Error('Password is mandatory.');\r\n    }\r\n    if (!userState.confirmPassword.trim()) {\r\n      throw new Error('Confirm Password is mandatory.');\r\n    }\r\n    if (userState.password != userState.confirmPassword) {\r\n      throw new Error(\"Password and Confirm Password don't match.\");\r\n    }\r\n  }\r\n\r\n  const onSignUpClick = async () => {\r\n    try {\r\n\r\n      validateUser();\r\n\r\n      const { user, token } = await postPatch('/users', 'POST', userState);\r\n\r\n      if (image) {\r\n        await upload('/users/me/avatar', image, null, token);\r\n      }\r\n\r\n      setCurrentUser(user);\r\n      setToken(token);\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(error.message);\r\n    }\r\n  };\r\n\r\n  const onUserChange = event => {\r\n    const { value, name } = event.target;\r\n\r\n    setUserState({ ...userState, [name]: value });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {\r\n        currentUser ? <Redirect to=\"/\" /> :\r\n\r\n          <div className='sign-up'>\r\n\r\n            <div className=\"user-data\">\r\n\r\n\r\n              <div className=\"user-data__title\">\r\n                <h2 className=\"heading-primary\">Sign Up</h2>\r\n              </div>\r\n\r\n              <div className=\"user-data__container\">\r\n\r\n                <InputField>\r\n                  <input type=\"text\" name=\"name\" id=\"user-data-user-name\" placeholder=\"User Name\" required value={userState.name}\r\n                    onChange={onUserChange} />\r\n                </InputField>\r\n\r\n                <InputField>\r\n                  <input type=\"email\" name=\"email\" id=\"user-data-email\" placeholder=\"Email\" required value={userState.email}\r\n                    onChange={onUserChange} />\r\n                </InputField>\r\n\r\n                <InputField>\r\n                  <input type=\"password\" name=\"password\" id=\"user-data-password\" placeholder=\"Password\" required value={userState.password}\r\n                    onChange={onUserChange} />\r\n                </InputField>\r\n\r\n                <InputField>\r\n                  <input type=\"password\" name=\"confirmPassword\" id=\"user-data-confirm-password\" placeholder=\"Confirm Password\" required\r\n                    value={userState.confirmPassword} onChange={onUserChange} />\r\n                </InputField>\r\n              </div>\r\n\r\n\r\n              <div className=\"user-data__button-container\">\r\n\r\n                <button onClick={onSignUpClick}>Sign Up</button>\r\n\r\n                <Link className=\"user-data__button-container--sign-in\" to='/login'>\r\n                  Login\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"sign-up__avatar\">\r\n              <h2 className=\"heading-secondary text\">Avatar</h2>\r\n              <ImageUpload />\r\n            </div>\r\n          </div>\r\n      }\r\n    </React.Fragment >\r\n  );\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  image: selectImage,\r\n  currentUser: selectCurrentUser\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\r\n  setToken: token => dispatch(setToken(token)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUp);\r\n"],"sourceRoot":""}