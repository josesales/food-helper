"use strict";(self.webpackChunkfood_helper=self.webpackChunkfood_helper||[]).push([[666],{2988:(e,t,a)=>{a.d(t,{A:()=>h});var l,s,i=a(5043),n=a(7508);const r=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},c.apply(null,arguments)}function o(e,t){let{title:a,titleId:n}=e,o=function(e,t){if(null==e)return{};var a,l,s=function(e,t){if(null==e)return{};var a={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.includes(l))continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,r);return i.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,ref:t,"aria-labelledby":n},o),a?i.createElement("title",{id:n},a):null,l||(l=i.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),s||(s=i.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11z"})))}const d=i.forwardRef(o);a.p;var m=a(3330),p=(a(5868),a(579));const h=(0,n.Ng)(null,(e=>({setImage:t=>e((0,m.g7)(t)),setBase64Image:t=>e((0,m.po)(t))})))((e=>{let{setImage:t,image:a,setBase64Image:l}=e;const[s,n]=(0,i.useState)(a||null);return(0,p.jsxs)("div",{className:"image-upload",children:[(0,p.jsx)("label",{htmlFor:"file-input",children:s?(0,p.jsx)("form",{encType:"multipart/form-data",children:(0,p.jsx)("img",{src:s,className:"image-upload__img"})}):(0,p.jsx)(d,{className:"image-upload__img"})}),(0,p.jsx)("input",{type:"file",accept:"image/jpeg, image/png",name:"image",id:"file-input",onChange:e=>{let{target:a}=e;if(a.files&&a.files[0]){var s=new FileReader;s.onload=function(e){(async()=>{await n(e.target.result),await l(e.target.result)})()},t(a.files[0]),s.readAsDataURL(a.files[0])}}})]})}))},3329:(e,t,a)=>{a.d(t,{A:()=>g});var l,s,i,n=a(2555),r=a(45),c=a(5043);const o=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},d.apply(null,arguments)}function m(e,t){let{title:a,titleId:n}=e,r=function(e,t){if(null==e)return{};var a,l,s=function(e,t){if(null==e)return{};var a={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.includes(l))continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,o);return c.createElement("svg",d({height:"512pt",viewBox:"-57 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},r),a?c.createElement("title",{id:n},a):null,l||(l=c.createElement("path",{d:"m156.371094 30.90625h85.570312v14.398438h30.902344v-16.414063c.003906-15.929687-12.949219-28.890625-28.871094-28.890625h-89.632812c-15.921875 0-28.875 12.960938-28.875 28.890625v16.414063h30.90625zm0 0"})),s||(s=c.createElement("path",{d:"m344.210938 167.75h-290.109376c-7.949218 0-14.207031 6.78125-13.566406 14.707031l24.253906 299.90625c1.351563 16.742188 15.316407 29.636719 32.09375 29.636719h204.542969c16.777344 0 30.742188-12.894531 32.09375-29.640625l24.253907-299.902344c.644531-7.925781-5.613282-14.707031-13.5625-14.707031zm-219.863282 312.261719c-.324218.019531-.648437.03125-.96875.03125-8.101562 0-14.902344-6.308594-15.40625-14.503907l-15.199218-246.207031c-.523438-8.519531 5.957031-15.851562 14.472656-16.375 8.488281-.515625 15.851562 5.949219 16.375 14.472657l15.195312 246.207031c.527344 8.519531-5.953125 15.847656-14.46875 16.375zm90.433594-15.421875c0 8.53125-6.917969 15.449218-15.453125 15.449218s-15.453125-6.917968-15.453125-15.449218v-246.210938c0-8.535156 6.917969-15.453125 15.453125-15.453125 8.53125 0 15.453125 6.917969 15.453125 15.453125zm90.757812-245.300782-14.511718 246.207032c-.480469 8.210937-7.292969 14.542968-15.410156 14.542968-.304688 0-.613282-.007812-.921876-.023437-8.519531-.503906-15.019531-7.816406-14.515624-16.335937l14.507812-246.210938c.5-8.519531 7.789062-15.019531 16.332031-14.515625 8.519531.5 15.019531 7.816406 14.519531 16.335937zm0 0"})),i||(i=c.createElement("path",{d:"m397.648438 120.0625-10.148438-30.421875c-2.675781-8.019531-10.183594-13.429687-18.640625-13.429687h-339.410156c-8.453125 0-15.964844 5.410156-18.636719 13.429687l-10.148438 30.421875c-1.957031 5.867188.589844 11.851562 5.34375 14.835938 1.9375 1.214843 4.230469 1.945312 6.75 1.945312h372.796876c2.519531 0 4.816406-.730469 6.75-1.949219 4.753906-2.984375 7.300781-8.96875 5.34375-14.832031zm0 0"})))}const p=c.forwardRef(m);a.p;var h=a(579);const u=["id","placeholder","number","onDelete"],g=e=>{const{id:t,placeholder:a,number:l,onDelete:s}=e,i=(0,r.A)(e,u);let c=null;return a&&(c=(0,h.jsx)("label",{htmlFor:t,className:"text-area-container__label",children:a})),(0,h.jsxs)("div",{className:"text-area-container",children:[(0,h.jsx)("textarea",(0,n.A)((0,n.A)({},i),{},{id:t,placeholder:a,className:"text-area-container__text",rows:"4",cols:"100"})),c,s?(0,h.jsx)("span",{onClick:s,children:(0,h.jsx)(p,{className:"text-area-container__remove"})}):"",l?(0,h.jsxs)("span",{className:"text-area-container__number",onClick:()=>{},children:[l,"."]}):""]})}},6666:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(2555),s=a(5043),i=a(7508),n=a(192),r=a(2988),c=a(3329),o=a(2466),d=a(579);const m=e=>{let{steps:t,onChange:a,onDelete:l}=e,s=null,i=null;return t&&0!=t.length?s=t.map(((e,t)=>(0,d.jsx)("li",{children:(0,d.jsx)(c.A,{number:t+1,value:e,id:t,onChange:a,onDelete:l})},t))):i=(0,d.jsx)("li",{className:"no-steps",children:(0,d.jsx)("h3",{children:"Currently there are no steps added"})},0),(0,d.jsx)("div",{className:"edit-steps",children:(0,d.jsx)("ul",{className:"edit-steps__list",children:s||i})})};var p=a(5498),h=a(5868),u=a(2463),g=a(8896),f=a(7708),x=a(7850);var j=a(7910),v=a(1696),_=a(2038),y=a(1688),b=a(3330),N=a(5240),A=a(2656),w=a(953);let C=!0,I=null;const O=(0,n.j8)({persistRecipe:h.xC,image:h.gG,base64Image:h.Zt,token:_.Cd,currentUser:_.xu}),E=(0,i.Ng)(O,(e=>({fetchIngredients:()=>e((0,g.L)()),fetchMaterials:()=>e((async e=>{try{const t=await(0,f.Jt)("/materials");e({type:x.Z.FETCH_MATERIALS,payload:t})}catch(t){console.log("Error while trying to communicate with the API: "+t.message)}})),fetchCategories:()=>e((0,j.j)()),fetchDietTypes:()=>e((0,v.i)()),setImage:t=>e((0,b.g7)(t)),setCurrentUser:t=>e((0,N.lt)(t)),displayMessage:t=>e((0,A.w)(t))})))((e=>{const{persistRecipe:t,image:a,base64Image:n,fetchIngredients:h,fetchMaterials:g,fetchCategories:x,fetchDietTypes:j,setImage:v,token:_,currentUser:b,setCurrentUser:N,displayMessage:A}=e,O=(0,y.zy)(),E=(0,y.W6)();let S=O&&O.state&&O.state.recipe&&O.state.recipe._id?O.state.recipe:null;const{type:T,message:P}=(0,i.d4)((e=>e.message));S&&(S=Object.assign({},S));let D=null;S&&S.image&&(D=S.image,delete S.image);const[U,z]=(0,s.useState)(S||{name:"",videoUrl:"",steps:[],preparationTime:"",peoplePerServing:"",calories:""}),k=e=>{z((0,l.A)((0,l.A)({},U),{},{[e.target.id]:e.target.value}))},[M,R]=(0,s.useState)(""),F=(0,i.d4)((e=>e.ingredient.ingredients)),L=(0,i.d4)((e=>e.material.materials)),V=(0,i.d4)((e=>e.category.categories)),H=(0,i.d4)((e=>e.dietType.dietTypes));return(0,s.useEffect)((()=>{C=!1,0==F.length&&h(),0==L.length&&g(),0==V.length&&x(),0==H.length&&j(),v(null)}),[]),(0,s.useEffect)((()=>{C||!t.ingredients?z((0,l.A)((0,l.A)({},U),t)):C=!0}),[t]),(0,s.useEffect)((()=>{I=n}),[n]),(0,d.jsxs)(s.Fragment,{children:[T&&P?(0,d.jsx)(w.A,{type:T,message:P}):null,(0,d.jsxs)("div",{className:"recipe-form",children:[(0,d.jsx)("div",{className:"recipe-form__title title-margin",children:(0,d.jsx)("h2",{className:"heading-primary",children:U.name?U.name:"New Recipe"})}),(0,d.jsxs)("div",{className:"center",children:[(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)(o.A,{children:(0,d.jsx)("input",{type:"text",id:"name",className:"input-margin",placeholder:"Name",required:!0,value:U.name,onChange:k,autoComplete:"off"})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(p.A,{id:"recipe-form_ingredients",placeholder:"Ingredients",buttonName:u.A.add,containerClass:"field__select input-margin",inputClass:"field__select__text",collectionName:"ingredients",collectionDb:S&&S.ingredients?S.ingredients:null,children:(0,d.jsx)("label",{htmlFor:"recipe-form_ingredients",className:"field__label",children:"Ingredients"})})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(p.A,{id:"recipe-form_materials",placeholder:"Materials",buttonName:u.A.add,containerClass:"field__select input-margin",inputClass:"field__select__text",collectionName:"materials",collectionDb:S&&S.materials?S.materials:null,children:(0,d.jsx)("label",{htmlFor:"recipe-form_materials",className:"field__label",children:"Materials"})})}),(0,d.jsx)(o.A,{children:(0,d.jsx)("input",{type:"text",id:"videoUrl",placeholder:"Youtube Video Url",required:!0,value:U.videoUrl,onChange:k,className:"input-margin",autoComplete:"off"})})]}),(0,d.jsxs)("div",{className:"image-container",children:[(0,d.jsx)("h2",{className:"heading-secondary text",children:"Picture"}),(0,d.jsx)(r.A,{image:D?"data:image/png;base64,"+D:null})]})]}),(0,d.jsxs)("div",{className:"center",children:[(0,d.jsxs)("div",{className:"container-2",children:[(0,d.jsx)(o.A,{children:(0,d.jsx)(p.A,{isSelect:!0,id:"recipe-form_categories",placeholder:"Category",buttonName:u.A.search,containerClass:"field__select input-margin",inputClass:"field__select__text",collectionName:"categories",documentDb:S&&S.category?S.category:null,children:(0,d.jsx)("label",{htmlFor:"recipe-form_categories",className:"field__label",children:"Category"})})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(p.A,{isSelect:!0,id:"recipe-form_diet-type",placeholder:"Diet Type",buttonName:u.A.search,containerClass:"field__select input-margin",inputClass:"field__select__text",collectionName:"dietTypes",documentDb:S&&S.dietType?S.dietType:null,children:(0,d.jsx)("label",{htmlFor:"recipe-form_diet-type",className:"field__label",children:"Diet Type"})})}),(0,d.jsx)(o.A,{children:(0,d.jsx)("input",{type:"text",id:"preparationTime",placeholder:"Preparation Time",className:"input-margin",required:!0,value:U.preparationTime,onChange:k,autoComplete:"off"})})]}),(0,d.jsxs)("div",{className:"container-3",children:[(0,d.jsx)(o.A,{children:(0,d.jsx)("input",{type:"number",min:"1",id:"peoplePerServing",placeholder:"People per Serving",value:U.peoplePerServing,onChange:k,className:"input-margin",autoComplete:"off"})}),(0,d.jsx)(o.A,{children:(0,d.jsx)("input",{type:"number",min:"1",id:"calories",placeholder:"Calories",value:U.calories,onChange:k,className:"input-margin",autoComplete:"off"})})]})]}),(0,d.jsx)("div",{className:"center",children:(0,d.jsxs)("div",{className:"step-container",children:[(0,d.jsx)("div",{className:"step-container__text-area",children:(0,d.jsx)(c.A,{id:"new-step",placeholder:"New Step",value:M,onChange:e=>{R(e.target.value)}})}),(0,d.jsx)("button",{className:"step-container__button",onClick:async()=>{await z((e=>(0,l.A)((0,l.A)({},e),{},{steps:e.steps.concat([M])}))),R("")},children:"Add Step"})]})}),(0,d.jsx)(m,{steps:U.steps,onChange:async e=>{const t=+e.target.id,a=e.target.value;await z((e=>(e.steps[t]=a,(0,l.A)({},e))))},onDelete:async e=>{const t=+e.target.id;z((e=>(0,l.A)((0,l.A)({},e),{},{steps:e.steps.filter(((e,a)=>a!=t))})))}}),(0,d.jsx)("div",{className:"center",children:(0,d.jsx)("div",{className:"save-button-container input-margin",children:(0,d.jsx)("button",{onClick:async()=>{try{if((!a||!a.type)&&!S)throw new Error("Image is mandatory");const e=await(0,f.Vl)("/recipes","POST",U,_);a&&await(0,f.Se)("/recipeImage",a,e._id,_);const t=Object.assign({},U);if(t.image=D,e.videoUrl&&(t.videoUrl=e.videoUrl),b.recipes&&b.recipes.length>0){const s=b.recipes.map((e=>e._id==t._id?(a&&(t.image=I.split(",")[1]),t):e));if(t._id)N((0,l.A)((0,l.A)({},b),{},{recipes:s}));else{t.image=I.split(",")[1];let a=Object.assign({},e);a=Object.assign(a,t),s&&s.length>0?N((0,l.A)((0,l.A)({},b),{},{recipes:[].concat(s).concat([a])})):N((0,l.A)((0,l.A)({},b),{},{recipes:[].concat([a])}))}}else N((0,l.A)((0,l.A)({},b),{},{recipes:[].concat(t)}));window.scrollTo(0,0),A({type:"success",message:"Your Recipe has been saved."}),E.push("/")}catch(e){console.log("Error while saving the recipe: "+e.message),window.scrollTo(0,0),A({type:"error",message:e.message})}},children:"Save Recipe"})})})]})]})}))}}]);
//# sourceMappingURL=666.60d250ae.chunk.js.map